# 1.nginx
nginx是一个开源且高性能、可靠的HTTP中间件和代理服务器
# 2.学习环境
## 2.1 操作系统
CENTOS>=7.0,位数x64 CENTOS 7.2
## 2.2 环境确认
### 2.2.1关闭iptables
iptables命令是Linux上常用的防火墙软件
| 功能 | 命令 |
| --- | --- |
| 停止防火墙 | systemctl stop firewalld.service
| 永久关闭防火墙 | systemctl disable firewalld.service |
### 2.2.2 确认停用 selinux
- 安全增强型 Linux (Security-Enhanced Linux)简称SELinux,它是一个Linux内核模块，也是Linux的一个安全子系统。
- SELinux 主要作用就是最大限度地减少系统中服务进程可访问的资源（最小权限原则）。
| 功能 | 命令 |
| --- | --- |
| 检查状态 | getenforce |
| 检查状态 | /usr/sbin/sestatus -v |
| 临时关闭 | setenforce 0 |
| 永久关闭 | /etc/selinux/config SELINUX=enforcing 改为SELINUX=disabled |
### 2.2.3 安装依赖模块
```javascript
yum  -y install gcc gcc-c++ autoconf pcre pcre-devel make automake
yum  -y install wget httpd-tools vim
```
# 3. nginx的优势
- IO多路复用 多个描述符的IO操作都能在一个线程里并发交替顺序完成,复用线程
    - select 线性遍历文件描述符列表 1，效率低下 2.最多只能有1024
    - epoll 每当fd就绪，采用系统回调函数将fd放入 1.效率高 2.没有1024限制
- CPU亲和 一种把CPU核心和Nginx工作进程绑定方式，把每个worker进程固定在一个CPU上执行，减少切换CPU和提交缓存命中率，获得更好的性能。
- sendfile 零拷贝传输模式 
![](/public/images/usercore.jpg)

# 4.nginx安装
## 4.1 版本分类
- Mainline version 开发板
- Stable version 稳定版
- Legacy versions 历史版本
## 4.2 下载地址
- [nginx](http://nginx.org/en/download.html)
- [linux_packages](http://nginx.org/en/linux_packages.html#stable)
## 4.3 CentOS下YUM安装
/etc/yum.repos.d/nginx.repo
```javascript
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/7/$basearch/
gpgcheck=0
enabled=1
```
```javascript
yum install nginx -y
nginx -v
nginx -V
```
# 5.目录
## 5.1 安装目录
查看配置文件和目录
```javascript
rpm -ql nginx
```
## 5.2 配置文件
| 类型 | 路径 | 用途 |
| --- | --- | --- |
| 配置文件 | /etc/logrotate.d/nginx | 用于logrotate服务的日志切割 |
| 配置文件 | /etc/nginx /etc/nginx/nginx.conf /etc/nginx/conf.d /etc/nginx/conf.d/default.conf | 主配置文件 |
| 配置文件 | /etc/nginx/fastcgi_params /etc/nginx/scgi_params /etc/nginx/uwsgi_params | cgi配置，fastcgi配置 |
| 配置文件 | /etc/nginx/koi-utf /etc/nginx/koi-win /etc/nginx/win-utf | 编码转换映射转化文件 |
| 配置文件 | /etc/nginx/mime.types | 设置http协议的Content-Type与扩展名对应关系 |
| 配置文件 | /usr/lib/systemd/system/nginx-debug.service /usr/lib/systemd/system/nginx.service /etc/sysconfig/nginx /etc/sysconfig/nginx-debug | 用于配置系统守护进程管理器管理方式 |
| 配置文件 | /etc/nginx/modules /usr/lib64/nginx/modules | nginx模块目录 |
| 命令 | /usr/share/doc/nginx-1.14.0 /usr/share/doc/nginx-1.14.0/COPYRIGHT | nginx的手册和帮助文件 |
| 目录 | /var/cache/nginx | nginx的缓存目录 |
| 目录 | /var/log/nginx | nginx的日志目录 |


















